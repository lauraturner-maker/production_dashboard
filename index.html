<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production & Quality Command Center</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --dark-blue: #0b0d48;
            --light-blue: #39b4ff;
            --light-gray: #F3F3F3;
            --white: #ffffff;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: var(--dark-blue);
        }

        header {
            background-color: var(--dark-blue);
            color: var(--light-gray);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 5px solid var(--light-blue);
        }

        header h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .timestamp {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
            display: grid;
            gap: 20px;
        }

        /* Controls Section */
        .controls-section {
            display: flex;
            justify-content: space-between;
            background-color: var(--white);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            align-items: center;
        }

        .control-group {
            display: flex;
            gap: 10px;
        }

        .control-label {
            font-weight: bold;
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        button {
            background-color: var(--light-gray);
            border: 1px solid #ccc;
            color: var(--dark-blue);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        button:hover {
            background-color: #e2e2e2;
        }

        button.active {
            background-color: var(--light-blue);
            color: var(--dark-blue);
            border-color: var(--light-blue);
        }

        /* Top KPI Row */
        .kpi-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .kpi-card {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--dark-blue);
            transition: transform 0.2s;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
        }

        .kpi-card.accent {
            border-left-color: var(--light-blue);
        }

        .kpi-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #555;
            margin-bottom: 10px;
        }

        .kpi-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--dark-blue);
            transition: opacity 0.3s;
        }

        .kpi-value.highlight {
            color: var(--light-blue);
        }

        .kpi-subtext {
            font-size: 0.85rem;
            margin-top: 5px;
            color: var(--success);
            font-weight: bold;
        }

        .kpi-subtext.negative { color: var(--danger); }
        .kpi-subtext.neutral { color: #666; }

        /* Charts Row */
        .charts-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .chart-card {
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .chart-header {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark-blue);
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 10px;
        }

        /* Assembly Line Status */
        .line-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .station {
            background-color: var(--light-gray);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            border-top: 4px solid var(--success);
            transition: border-color 0.3s;
        }

        .station.warning { border-top-color: var(--warning); }
        .station.danger { border-top-color: var(--danger); }

        .station-name { margin-bottom: 5px; font-size: 0.9rem; }
        .station-status { font-size: 0.8rem; color: #666; font-weight: normal; }

        @media (max-width: 1024px) {
            .charts-row { grid-template-columns: 1fr; }
            .controls-section { flex-direction: column; gap: 15px; align-items: flex-start; }
        }
    </style>
</head>
<body>

    <header>
        <div>
            <h1>AutoPlant Production Metrics</h1>
            <p style="color: var(--light-blue); margin-top: 5px;" id="header-subtitle">Viewing: Line 1 - Shift A</p>
        </div>
        <div class="timestamp" id="time-display">
            Live Feed: Updated Just Now
        </div>
    </header>

    <div class="dashboard-container">
        
        <div class="controls-section">
            <div class="control-group">
                <span class="control-label">Assembly Line:</span>
                <button class="btn line-btn active" onclick="updateData('line', 1, this)">Line 1</button>
                <button class="btn line-btn" onclick="updateData('line', 2, this)">Line 2</button>
            </div>
            <div class="control-group">
                <span class="control-label">Shift:</span>
                <button class="btn shift-btn active" onclick="updateData('shift', 'A', this)">Shift A (Morning)</button>
                <button class="btn shift-btn" onclick="updateData('shift', 'B', this)">Shift B (Night)</button>
            </div>
        </div>

        <div class="kpi-row">
            <div class="kpi-card accent">
                <div class="kpi-title">Units Produced</div>
                <div class="kpi-value highlight" id="kpi-units">342</div>
                <div class="kpi-subtext" id="sub-units">+12 Ahead of Target</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">FPY (First Pass Yield)</div>
                <div class="kpi-value" id="kpi-fpy">94.8%</div>
                <div class="kpi-subtext neutral">Target: 95.0%</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-title">OEE</div>
                <div class="kpi-value highlight" id="kpi-oee">88.5%</div>
                <div class="kpi-subtext" id="sub-oee">Optimal</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">MTBF</div>
                <div class="kpi-value" id="kpi-mtbf">142h</div>
                <div class="kpi-subtext neutral">Mean Time Btw Failures</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">MTTR</div>
                <div class="kpi-value" id="kpi-mttr">45m</div>
                <div class="kpi-subtext" id="sub-mttr">↓ 5m from last week</div>
            </div>
        </div>

        <div class="charts-row">
            <div class="chart-card">
                <div class="chart-header">Hourly Production Volume</div>
                <canvas id="productionChart" height="90"></canvas>
            </div>

            <div class="chart-card">
                <div class="chart-header">Quality Issues Breakdown</div>
                <canvas id="defectChart" height="200"></canvas>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">Live Assembly Stages Status</div>
            <div class="line-status" id="station-container">
                </div>
        </div>

    </div>

    <script>
        // Palette setup
        const darkBlue = '#0b0d48';
        const lightBlue = '#39b4ff';

        // --- Mock Data Scenarios ---
        const dashboardData = {
            '1-A': {
                kpis: { units: '342', subUnits: '+12 Ahead of Target', subUnitsClass: '', fpy: '94.8%', oee: '88.5%', subOee: 'Optimal', subOeeClass: '', mtbf: '142h', mttr: '45m', subMttr: '↓ 5m from last week', subMttrClass: '' },
                prodData: [42, 45, 48, 41, 50, 39, 44, 33],
                defectData: [45, 25, 20, 10],
                stations: [
                    { name: '1. Stamping', status: 'Running - 100%', class: '' },
                    { name: '2. Welding', status: 'Running - 98%', class: '' },
                    { name: '3. Paint Shop', status: 'Main. Warning - 82%', class: 'warning' },
                    { name: '4. Engine Install', status: 'Running - 100%', class: '' },
                    { name: '5. Interior Trim', status: 'Running - 95%', class: '' },
                    { name: '6. Final QA', status: 'Bottleneck - 60%', class: 'danger' }
                ]
            },
            '1-B': {
                kpis: { units: '290', subUnits: '-5 Behind Target', subUnitsClass: 'negative', fpy: '96.2%', oee: '82.1%', subOee: 'Slight Lag', subOeeClass: 'warning', mtbf: '150h', mttr: '52m', subMttr: '↑ 2m from last week', subMttrClass: 'negative' },
                prodData: [38, 40, 39, 42, 35, 41, 30, 25],
                defectData: [20, 40, 30, 10],
                stations: [
                    { name: '1. Stamping', status: 'Running - 95%', class: '' },
                    { name: '2. Welding', status: 'Running - 99%', class: '' },
                    { name: '3. Paint Shop', status: 'Running - 90%', class: '' },
                    { name: '4. Engine Install', status: 'Minor Issue - 75%', class: 'warning' },
                    { name: '5. Interior Trim', status: 'Running - 100%', class: '' },
                    { name: '6. Final QA', status: 'Running - 95%', class: '' }
                ]
            },
            '2-A': {
                kpis: { units: '410', subUnits: '+25 Ahead of Target', subUnitsClass: '', fpy: '98.1%', oee: '94.2%', subOee: 'Peak Efficiency', subOeeClass: '', mtbf: '210h', mttr: '30m', subMttr: 'Optimal', subMttrClass: '' },
                prodData: [50, 52, 55, 51, 54, 53, 50, 45],
                defectData: [10, 15, 60, 15],
                stations: [
                    { name: '1. EV Battery Drop', status: 'Running - 100%', class: '' },
                    { name: '2. Chassis Mate', status: 'Running - 100%', class: '' },
                    { name: '3. Cab Install', status: 'Running - 98%', class: '' },
                    { name: '4. Wiring Harness', status: 'Running - 99%', class: '' },
                    { name: '5. Software Flash', status: 'Running - 100%', class: '' },
                    { name: '6. Water Test', status: 'Running - 100%', class: '' }
                ]
            },
            '2-B': {
                kpis: { units: '120', subUnits: 'Line Down', subUnitsClass: 'negative', fpy: '88.0%', oee: '45.0%', subOee: 'Critical Failure', subOeeClass: 'negative', mtbf: '85h', mttr: '120m', subMttr: 'Awaiting Parts', subMttrClass: 'negative' },
                prodData: [45, 48, 27, 0, 0, 0, 0, 0],
                defectData: [5, 5, 80, 10], // Massive electrical spike causing shutdown
                stations: [
                    { name: '1. EV Battery Drop', status: 'Halted - 0%', class: 'danger' },
                    { name: '2. Chassis Mate', status: 'Halted - 0%', class: 'danger' },
                    { name: '3. Cab Install', status: 'Halted - 0%', class: 'danger' },
                    { name: '4. Wiring Harness', status: 'Fault - 0%', class: 'danger' },
                    { name: '5. Software Flash', status: 'Idle - 0%', class: 'warning' },
                    { name: '6. Water Test', status: 'Idle - 0%', class: 'warning' }
                ]
            }
        };

        // --- Initialization ---
        let currentLine = 1;
        let currentShift = 'A';

        // Initialize Charts
        const prodCtx = document.getElementById('productionChart').getContext('2d');
        let productionChart = new Chart(prodCtx, {
            type: 'bar',
            data: {
                labels: ['Hr 1', 'Hr 2', 'Hr 3', 'Hr 4', 'Hr 5', 'Hr 6', 'Hr 7', 'Hr 8'],
                datasets: [
                    { label: 'Actual Production', data: [], backgroundColor: lightBlue, borderRadius: 4 },
                    { label: 'Target', data: [45, 45, 45, 45, 45, 45, 45, 45], type: 'line', borderColor: darkBlue, borderWidth: 2, pointRadius: 0, fill: false }
                ]
            },
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        const defectCtx = document.getElementById('defectChart').getContext('2d');
        let defectChart = new Chart(defectCtx, {
            type: 'doughnut',
            data: {
                labels: ['Paint/Body', 'Mechanical', 'Electrical', 'Trim/Fit'],
                datasets: [{ data: [], backgroundColor: [darkBlue, lightBlue, '#85cbf9', '#d9e2ec'], borderWidth: 2, borderColor: '#ffffff' }]
            },
            options: { responsive: true, cutout: '70%', plugins: { legend: { position: 'bottom' } } }
        });

        // --- Update Functions ---
        function updateData(type, val, btnElement) {
            // Update UI Buttons
            if (type === 'line') {
                currentLine = val;
                document.querySelectorAll('.line-btn').forEach(b => b.classList.remove('active'));
            } else {
                currentShift = val;
                document.querySelectorAll('.shift-btn').forEach(b => b.classList.remove('active'));
            }
            btnElement.classList.add('active');
            
            // Update Header
            document.getElementById('header-subtitle').innerText = `Viewing: Line ${currentLine} - Shift ${currentShift}`;

            // Fetch simulated data
            const key = `${currentLine}-${currentShift}`;
            const data = dashboardData[key];

            // 1. Update KPIs
            document.getElementById('kpi-units').innerText = data.kpis.units;
            document.getElementById('sub-units').innerText = data.kpis.subUnits;
            document.getElementById('sub-units').className = `kpi-subtext ${data.kpis.subUnitsClass}`;
            
            document.getElementById('kpi-fpy').innerText = data.kpis.fpy;
            
            document.getElementById('kpi-oee').innerText = data.kpis.oee;
            document.getElementById('sub-oee').innerText = data.kpis.subOee;
            document.getElementById('sub-oee').className = `kpi-subtext ${data.kpis.subOeeClass}`;
            
            document.getElementById('kpi-mtbf').innerText = data.kpis.mtbf;
            
            document.getElementById('kpi-mttr').innerText = data.kpis.mttr;
            document.getElementById('sub-mttr').innerText = data.kpis.subMttr;
            document.getElementById('sub-mttr').className = `kpi-subtext ${data.kpis.subMttrClass}`;

            // 2. Update Charts
            productionChart.data.datasets[0].data = data.prodData;
            productionChart.update();

            defectChart.data.datasets[0].data = data.defectData;
            defectChart.update();

            // 3. Update Stations
            const stationContainer = document.getElementById('station-container');
            stationContainer.innerHTML = '';
            data.stations.forEach(st => {
                stationContainer.innerHTML += `
                    <div class="station ${st.class}">
                        <div class="station-name">${st.name}</div>
                        <div class="station-status">${st.status}</div>
                    </div>
                `;
            });
        }

        // Clock
        setInterval(() => {
            document.getElementById('time-display').innerText = `Live Feed: ${new Date().toLocaleTimeString()}`;
        }, 1000);

        // Initial Load
        updateData('line', 1, document.querySelector('.line-btn.active'));
    </script>
</body>
</html>
